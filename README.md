# MedAnnet

#### Тестовое приложение Взаимодействие с Базой Данных на основе Spring Data jDBC

#### **Стек**
Java version  - 17 

Spring boot 

Spring Data jDBC

PostgreSQL

Spring Security

при запуске используется Preliquibase и Liquibase 
создаётся БД (postgre) с данными для проверки работоспособности

#### **endpoint's**

**_"/registration"_** метод POST входные данные в формате Json { "login": String, "password": String}
для удобства проверки имеющихся пользователей сделан метод GET - (получить список пользователей БД)

**_"/auth"_** метод POST 
    входные данные в формате Json { "login": String, "password": String}
происходит поиск в БД юзера и проверка пароля
ответ в формате Json {"token": String /сгенерированный токен/} и 200 ОК
в случае отсутствия пользователя ответ "Incorrect username or password" и 401 Unauthorized

**_к остальным endpoint'ам доступ только по токену_**
Header должен содержать поле "Authorization", формат Токена "Bearer " + токен

**_api/v1/question_** Добавление вопроса в БД метод POST
входные данные в формате Json { "questionText": String, "isOpenedAnswer": Boolean}
isOpenedAnswer - в случае False, ответ на вопрос надо будет выбирать из имеющихся вариантов в БД
В базе может быть не более 5 вопросов (не стал усложнять с компановкой вопросов в тесты, либо Лимитировать при выводе)
Метод DELETE формат {"questionId": UUID} удаление вопроса из БД

**_api/v1/answer_** Добавление ответа в БД метод POST
входные данные в формате Json { "answerText": String, "isCorrect": Boolean, "questionId": UUID}
isCorrect - флаг, я вляется ли ответ верным для вопроса с указанным ID. (Неверные ответы используются для закрытых вопросов)
##### Корректнее было бы сделать отдельную таблицу AnswerID + QuestionID

**_"api/v1/get_test"_** метод GET  
В ответ список имеющихся вопросов в БД, если вопрос закрытого типа, то он будет со списком вариантов ответов

**_"api/v1/statistic"_** 
Просмотр статистических данных
Все методы GET 

**_"api/v1/statistic/my_stats"_** получить информацию {"процент правильных ответов",
"процент сдавших лучше пользователя", "процент сдавших хуже пользователя"}

**_"api/v1/statistic/my_answers"_** получить информацию об ответах на вопросы пользователя
##### Формат данных с ID полей, уже спешил и не сделал более удобную форму вывода

**_"api/v1/statistic/all_stats"_** получить общую информацию {"количество зарегестрированных пользователей", }
"количество завершивших тест", "количество непрошедших тест до конца", "количество сдавших тест идеально"}

Вложен docker-compose, для старта вместе контейнером БД.. 
Но докер-контейнер не может стартануть, всплывает ошибка приложения, которую я пока не смог устранить, по всей видимости, связана с тем,
что я не смог за это время полностью изучить настройки jDBC, а JPA и Хибернейт настраивались проще и по другому.